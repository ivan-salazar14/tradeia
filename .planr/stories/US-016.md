# User Story: US-016 - Api key binance for trading API Integration

## Status: IN PROGRESS  
*(Valid values: TODO, IN PROGRESS, DONE)*

## Description:

As a registered user, I want the application to integrate with binance api key so that I can trade signals from professional providers.

## Acceptance Criteria:

- [ ] create a view to add binance api key
- [ ] create a view to remove binance api key
- [ ] create a view to update binance api key
- [ ] create a view to list binance api keys
- [ ] Save binance api key in the database
- [ ] Failed API connections are gracefully handled with appropriate user notifications
- [ ] use jwt token to authenticate the requests

## Task Groups

1. - [ ] Api key binance for trading API Integration
   1. - [ ] create a view to add binance api key
   2. - [ ] create a view to remove binance api key
   3. - [ ] create a view to update binance api key
   4. - [ ] create a view to list binance api keys
   5. - [ ] Save binance api key in the database
   6. - [ ] Failed API connections are gracefully handled with appropriate user notifications
   7. - [ ] use jwt token to authenticate the requests

## Estimation: 5 story points

Story Points: 5 SP (5 days of Human Development = 50 minutes of AI development)

## Developer Notes:

- Implementado endpoint interno `GET /api/signals` en `src/app/api/signals/route.ts` que:
  - Proxy a proveedor externo usando header `Authorization: Bearer <JWT>` (según colección Postman).
  - Normaliza la respuesta al modelo unificado (`src/lib/signals/types.ts`, `src/lib/signals/normalize.ts`).
  - Valida inputs (`symbol`, `timeframe`) y aplica quality checks de campos requeridos/numéricos.
  - Incluye un circuito simple (breaker) para resiliencia ante fallos y manejo de errores 5xx.
  - Filtra por estrategias activas con header `X-Active-Strategies` desde la UI (claims JWT).

- UI conectada: `src/app/dashboard/signals/page.tsx` ahora es client component que:
  - Obtiene el JWT desde Supabase (`supabase.auth.getSession()`).
  - Llama a `/api/signals?symbol=BTC/USDT&timeframe=4h` pasando `Authorization` y `X-Active-Strategies`.
  - Muestra campos normalizados incluyendo proveedor en tabla.
  - Mensajes de carga y error para notificar al usuario.

- Documentación: creado `docs/integrations/signal_format.md` con especificación del modelo unificado y ejemplo.

## Chat Command Log:

- User commands: Create stories for connecting with signals generation API
- Agent Response: Created US-016 story for binance api key integration