# API Token Management

## Overview

API tokens provide a secure way for external applications to authenticate with the Tradeia API. This document describes how to create, manage, and use API tokens for accessing the Signals Generation API.

## Token Creation

API tokens can be created in two ways:

1. **During Login**: When logging in, you can request a token to be generated by setting the `generateToken` parameter to `true`.
2. **Token Management Page**: Navigate to the Token Management page in the dashboard to create and manage tokens.

## Token Permissions

Each token can have one or more of the following permissions:

- **read**: Allows reading data from the API (e.g., fetching signals)
- **write**: Allows writing data to the API (e.g., creating signals)
- **execute**: Allows executing operations (e.g., running analysis)

## API Endpoints

### Login and Generate Token

```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "your-password",
  "generateToken": true,
  "tokenDescription": "My API Token",
  "tokenPermissions": ["read", "write"]
}
```

Response:

```json
{
  "user": { ... },
  "token": "your-api-token",
  "tokenId": "token-uuid"
}
```

### Generate Token (Standalone)

```http
POST /api/tokens
Content-Type: application/json

{
  "description": "My API Token",
  "permissions": ["read", "write"],
  "expiresInDays": 90
}
```

Response:

```json
{
  "id": "token-uuid",
  "token": "your-api-token",
  "description": "My API Token",
  "permissions": ["read", "write"],
  "createdAt": "2023-07-23T12:00:00Z",
  "expiresAt": "2023-10-21T12:00:00Z"
}
```

### List Tokens

```http
GET /api/tokens
```

Response:

```json
[
  {
    "id": "token-uuid",
    "description": "My API Token",
    "permissions": ["read", "write"],
    "createdAt": "2023-07-23T12:00:00Z",
    "expiresAt": "2023-10-21T12:00:00Z",
    "lastUsedAt": "2023-07-24T15:30:00Z"
  }
]
```

### Revoke Token

```http
DELETE /api/tokens/{tokenId}
```

Response:

```json
{
  "message": "Token revoked successfully"
}
```

## Using Tokens in API Requests

To authenticate API requests, include the token in the request headers using one of the following methods:

### Authorization Header

```http
GET /api/signals
Authorization: Bearer your-api-token
```

### X-API-Key Header

```http
GET /api/signals
X-API-Key: your-api-token
```

## Webhook for Signals

External providers can send signals to the Tradeia platform using the webhook endpoint:

```http
POST /api/webhook/signals
Content-Type: application/json
X-API-Key: your-api-token

{
  "symbol": "BTC/USD",
  "type": "BUY",
  "entry": 50000,
  "takeProfit": 55000,
  "stopLoss": 48000,
  "timeframe": "4h",
  "notes": "Strong bullish pattern forming"
}
```

Response:

```json
{
  "message": "Signal received successfully",
  "signalId": "signal-uuid"
}
```

## Security Considerations

1. **Token Storage**: Store tokens securely and never expose them in client-side code.
2. **Token Expiration**: Tokens have an expiration date. Renew or create new tokens before they expire.
3. **Permissions**: Use the principle of least privilege - only request permissions that are necessary.
4. **Revocation**: Revoke tokens that are no longer needed or if they are compromised.

## Best Practices

1. **Use Descriptive Names**: Give tokens descriptive names to easily identify their purpose.
2. **Regular Rotation**: Rotate tokens regularly for enhanced security.
3. **Monitor Usage**: Keep track of when tokens are used to detect potential unauthorized access.
4. **Separate Tokens**: Use different tokens for different applications or environments.